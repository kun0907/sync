<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="DeliveryVehicle" >
  <resultMap id="deliveryVehicleMap" type="DeliveryVehicle" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Feb 27 18:53:11 CST 2017.
    -->
    <id column="de_vehicle_id" property="deVehicleId" jdbcType="OTHER" />
    <result column="delivery_id" property="deliveryId" jdbcType="OTHER" />
    <result column="delivery_no" property="deliveryNo" jdbcType="OTHER" />
    <result column="transport_mode" property="transportMode" jdbcType="OTHER" />
    <result column="plate_number" property="plateNumber" jdbcType="OTHER" />
    <result column="flat_number" property="flatNumber" jdbcType="OTHER" />
    <result column="ship_number" property="shipNumber" jdbcType="OTHER" />
    <result column="package_no" property="packageNo" jdbcType="OTHER" />
    <result column="start_place" property="startPlace" jdbcType="OTHER" />
    <result column="destination" property="destination" jdbcType="OTHER" />
    <result column="charge_person_name" property="chargePersonName" jdbcType="OTHER" />
    <result column="charge_person_phone" property="chargePersonPhone" jdbcType="OTHER" />
    <result column="de_vehicle_state" property="deVehicleState" jdbcType="OTHER" />
  </resultMap>
  <select id="queryVehicleData" resultMap="deliveryVehicleMap" parameterType="string">
    select pdv.DE_VEHICLE_ID,pdv.DELIVERY_ID,pdv.DELIVERY_NO,pdv.TRANSPORT_MODE,
    pdv.PLATE_NUMBER,pdv.CHARGE_PERSON_NAME,pdv.CHARGE_PERSON_PHONE
    FROM  p_delivery_vehicle pdv
    <where>
      pdv.delivery_id = #{deliveryId}
    </where>
  </select>
  
  <delete id="delDeliveryVehicleDetail" parameterType="string">
    delete FROM  p_delivery_vehicle pdv
    <where>
      pdv.delivery_id = #{deliveryId}
    </where>
  </delete>

  <!-- 批量插入发货车辆表 -->
  <insert id="insertList" parameterType="java.util.List" useGeneratedKeys="false">
    insert into p_delivery_vehicle
    (de_vehicle_id, delivery_id, delivery_no,transport_mode, plate_number, flat_number,ship_number, start_place, destination,
    charge_person_name, charge_person_phone, de_vehicle_state)
    SELECT A.*
    FROM(
    <foreach collection="list" item="item" index="index" separator="UNION ALL">
      (SELECT
      #{item.deVehicleId,jdbcType=VARCHAR} de_vehicle_id,
      #{item.deliveryId,jdbcType=VARCHAR} delivery_id,
      #{item.deliveryNo,jdbcType=VARCHAR} delivery_no,
      #{item.transportMode,jdbcType=VARCHAR} transport_mode,
      #{item.plateNumber,jdbcType=VARCHAR} plate_number,
      #{item.flatNumber,jdbcType=VARCHAR} flat_number,
      #{item.shipNumber,jdbcType=VARCHAR} ship_number,
      #{item.startPlace,jdbcType=VARCHAR} start_place,
      #{item.destination,jdbcType=VARCHAR} destination,
      #{item.chargePersonName,jdbcType=VARCHAR} charge_person_name,
      #{item.chargePersonPhone,jdbcType=VARCHAR} charge_person_phone,
      #{item.deVehicleState,jdbcType=VARCHAR} de_vehicle_state
      FROM dual)
    </foreach>
    )A
  </insert>
</mapper>