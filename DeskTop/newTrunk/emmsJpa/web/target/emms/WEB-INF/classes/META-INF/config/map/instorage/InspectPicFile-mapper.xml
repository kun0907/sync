<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="InspectPicFile">

    <resultMap type="InspectPicFile" id="inspectPicFileMap">
        <result column="materia_inspect_id" property="materiaInspectId"/>
        <result column="real_file_name" property="realFileName"/>
        <result column="contents" property="contents"/>
        <result column="inspect_pic_file_id" property="inspectPicFileId"/>
    </resultMap>


    <!-- 根据条件分页查询条目 -->
    <select id="selectByCondition" resultMap="inspectPicFileMap" parameterType="map">
        select * from I_INSPECT_PIC_FILE iq left join I_QUALITY_INSPECT ii where ii.materia_inspect_id = #{materiaInspectId}
    </select>

    <!-- 插入一个实体 -->
    <insert id="insert" parameterType="InspectPicFile" useGeneratedKeys="false">
        insert into I_INSPECT_PIC_FILE(
        materia_inspect_id, real_file_name, contents,inspect_pic_file_id
        ) values(
        #{materiaInspectId}, #{realFileName}, #{contents,jdbcType=BLOB},#{inspectPicFileId}
        )
    </insert>

    <!-- 根据图片表id查询 -->
    <select id="selectByPk" resultMap="inspectPicFileMap" parameterType="string">
        select * from I_INSPECT_PIC_FILE where materia_inspect_id = #{materiaInspectId}
    </select>

    <!-- 根据图片表id查询 -->
    <select id="selectByPkPicId" resultMap="inspectPicFileMap" parameterType="string">
        select * from I_INSPECT_PIC_FILE where inspect_pic_file_id = #{inspectPicFileId}
    </select>

    <!-- 根据图片表id删除文件 -->
    <delete id="delete" parameterType="string">
        delete from I_INSPECT_PIC_FILE where inspect_pic_file_id = #{inspectPicFileId}
    </delete>

</mapper>