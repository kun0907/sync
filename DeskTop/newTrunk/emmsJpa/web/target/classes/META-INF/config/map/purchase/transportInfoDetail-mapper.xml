<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="TransportInfoDetail">
    <resultMap type="TransportInfoDetail" id="transportInfoDetailMap">
        <id column="transport_info_detail_id" property="transportInfoDetailId"/>
        <result column="transport_info_id" property="transportInfoId"/>
        <result column="ship_name" property="shipName"/>
        <result column="ocean_vessel" property="oceanVessel"/>
        <result column="ji_gang_date" property="jiGangDate"/>
        <result column="create_user_name" property="createUserName"/>
        <result column="create_time" property="createTime"/>
        <result column="expect_departure_date" property="expectDepartureDate"/>
        <result column="actual_departure_date" property="actualDepartureDate"/>
        <result column="expect_arrival_date" property="expectArrivalDate"/>
        <result column="actual_arrival_date" property="actualArrivalDate"/>
        <result column="inspect_staus" property="inspectStaus"/>
    </resultMap>
    <!-- 根据条件分页查询条目 -->
    <select id="selectByCondition" resultMap="transportInfoDetailMap" parameterType="map">
        select * from(
        select
        transport_info_detail_id,transport_info_id,ship_name,ocean_vessel,
        ji_gang_time,expect_departure_date,actual_departure_date,expect_arrival_date,actual_arrival_date,inspect_staus,
        create_user_name,ROW_NUMBER() OVER(order by create_time desc) r
        from
        p_transport_info_detail pti
        )s
        where  s.r between #{page.startPos} and ((#{page.pageSize}+#{page.startPos})-1)
    </select>

    <!-- 根据条件查询条目数 -->
    <select id="countByCondition" resultType="int" parameterType="map">
        select count(*)
        from
        p_transport_info_detail pti
    </select>
    <delete id="delete" parameterType="string">
        delete from p_transport_info_detail pti where transport_info_detail_id = #{transport_info_detail_id}
    </delete>
    <!-- 根据ID查询单个实体 -->
    <select id="selectByPk" resultMap="transportInfoDetailMap" parameterType="string">
        select * from p_transport_info_detail pti where transport_info_detail_id = #{transport_info_detail_id}
    </select>
    <!-- 编辑 -->
    <update id="update" parameterType="TransportInfoDetail">
        update p_transport_info_detail pti
        <set>
            transport_info_detail_id = #{transportInfoDetailId}, transport_info_id = #{transportInfoId},
            ship_name = #{shipName}, ocean_vessel = #{oceanVessel},
            ji_gang_time = #{jiGangTime},expect_departure_date=#{expectDepartureDate},
            actual_departure_date=#{actualDepartureDate},expect_arrival_date=#{expectArrivalDate},
            actual_arrival_date=#{actualArrivalDate},inspect_staus=#{inspectStaus},create_user_name = #{createUserName},
            create_time = #{createTime,jdbcType=TIMESTAMP}
        </set>
        where transport_info_id = #{transportInfoId}
    </update>
    <!-- 插入仓库信息 -->
    <insert id="insert" parameterType="TransportInfoDetail" useGeneratedKeys="false">
        insert into p_transport_info_detail (
        transport_info_detail_id,transport_info_id,ship_name,ocean_vessel,
        ji_gang_time,expect_departure_date,actual_departure_date,expect_arrival_date,
        actual_arrival_date,inspect_staus,create_time,create_user_name
        ) values (
        #{transportInfoDetailId},#{transportInfoId},
        #{shipName},#{oceanVessel},
        #{jiGangTime},#{expectDepartureDate},#{actualDepartureDate},#{expectArrivalDate},
        #{actualArrivalDate},#{inspectStaus},#{createTime,jdbcType=TIMESTAMP},#{createUserName}
        )
    </insert>
</mapper>