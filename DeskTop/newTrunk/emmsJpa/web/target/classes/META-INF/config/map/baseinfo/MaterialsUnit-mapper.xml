<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="MaterialsUnit">

	<resultMap type="MaterialsUnit" id="MaterialsUnitMap">
		<id column="materials_unit_id" property="materialsUnitId"/>
		<result column="materials_id" property="materialsId" />
		<result column="unit_of_measurement" property="unitOfMeasurement" />
		<result column="materials_conversion" property="materialsConversion" />
	</resultMap>

	<!-- 根据系统物资ID查询单位换算列表 -->
	<select id="selectListByMaterialsId" resultMap="MaterialsUnitMap" parameterType="string">
		select * from b_materials_unit where materials_id = #{materialsId}
	</select>

	<!-- 根据系统物资ID删除 -->
	<delete id="deleteByMaterialsId" parameterType="string">
		delete from b_materials_unit where materials_id = #{materialsId}
	</delete>

	<!-- 批量插入 -->
	<insert id="insertList" parameterType="java.util.List" useGeneratedKeys="false">
		insert into b_materials_unit(
		materials_id, unit_of_measurement, materials_conversion, materials_unit_id
		)
		SELECT A.*
		FROM(
		<foreach collection="list" item="item" index="index" separator="UNION ALL">
			(SELECT
			#{item.materialsId} materials_id, #{item.unitOfMeasurement} unit_of_measurement, #{item.materialsConversion} materials_conversion,
			#{item.materialsUnitId} materials_unit_id
			FROM dual)
		</foreach>
		)A
	</insert>

</mapper>