<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="DemandChangeRecord" >
    <resultMap type="DemandChangeRecord" id="demandChangeRecordMap">
        <id column="change_id" property="changeId"/>
        <result column="demand_id" property="demandId"/>
        <result column="demand_detail_id" property="demandDetailId"/>
        <result column="change_date" property="changeDate"/>
        <result column="change_count" property="changeCount"/>
    </resultMap>
    <insert id="insertList" parameterType="java.util.List" useGeneratedKeys="false">
        insert into out_demand_change
        (change_id,demand_id,
        demand_detail_id,change_date,
        change_count
        )
        SELECT A.*
        FROM(
        <foreach collection="list" item="item" index="index" separator="UNION ALL">
            (SELECT
            #{item.changeId} change_id,#{item.demandId} demand_id,
            #{item.demandDetailId} demand_detail_id,#{item.changeDate} change_date,
            #{item.changeCount} change_count
            FROM dual)
        </foreach>
        )A
    </insert>
</mapper>
